{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///project/sandbox/user-workspace/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport useSWR from 'swr';\n\ninterface Pump {\n  id: number;\n  name: string;\n  city: string;\n  address: string;\n  latitude: number;\n  longitude: number;\n  status: boolean;\n  phone?: string;\n  timings?: string;\n  distance?: number;\n  updatedAt: string;\n}\n\nconst fetcher = (url: string) => fetch(url).then(res => res.json());\n\nexport default function HomePage() {\n  const [coords, setCoords] = useState<{lat: number, lng: number} | null>(null);\n  const [geoError, setGeoError] = useState<string | null>(null);\n  const [cityFilter, setCityFilter] = useState<string>('');\n  const [isLocationLoading, setIsLocationLoading] = useState(false);\n  const [selectedRadius, setSelectedRadius] = useState<number>(10);\n\n  // Build API URL with query parameters\n  const buildApiUrl = () => {\n    const params = new URLSearchParams();\n    if (coords) {\n      params.append('lat', coords.lat.toString());\n      params.append('lng', coords.lng.toString());\n      params.append('radius', selectedRadius.toString());\n    }\n    if (cityFilter) {\n      params.append('city', cityFilter);\n    }\n    return `/api/pumps?${params.toString()}`;\n  };\n\n  const { data, error, mutate } = useSWR(buildApiUrl(), fetcher, { \n    refreshInterval: 30000, // Refresh every 30 seconds for real-time updates\n    revalidateOnFocus: true\n  });\n\n  // Get device geolocation\n  const detectLocation = () => {\n    setIsLocationLoading(true);\n    setGeoError(null);\n    \n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setCoords({ \n            lat: position.coords.latitude, \n            lng: position.coords.longitude \n          });\n          setIsLocationLoading(false);\n        },\n        (err) => {\n          setGeoError('Unable to retrieve your location. Please enable location services.');\n          setIsLocationLoading(false);\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 300000 // 5 minutes\n        }\n      );\n    } else {\n      setGeoError('Geolocation is not supported by your browser.');\n      setIsLocationLoading(false);\n    }\n  };\n\n  // Clear location\n  const clearLocation = () => {\n    setCoords(null);\n    setGeoError(null);\n  };\n\n  // Get status color\n  const getStatusColor = (status: boolean) => {\n    return status ? 'text-green-600' : 'text-red-600';\n  };\n\n  // Get status text\n  const getStatusText = (status: boolean) => {\n    return status ? 'Open' : 'Closed';\n  };\n\n  // Format distance\n  const formatDistance = (distance?: number) => {\n    if (!distance) return '';\n    return distance < 1 ? `${Math.round(distance * 1000)}m` : `${distance.toFixed(1)}km`;\n  };\n\n  // Major Indian cities for quick filter\n  const majorCities = ['Mumbai', 'Delhi', 'Bangalore', 'Chennai', 'Pune', 'Ahmedabad', 'Hyderabad', 'Kolkata'];\n\n  return (\n    <main className=\"container mx-auto px-4 py-8 max-w-6xl\">\n      {/* Header */}\n      <header className=\"text-center mb-8\">\n        <h1 className=\"text-4xl font-bold text-gray-900 mb-2\">\n          CNG Gas Pumps Near Me\n        </h1>\n        <p className=\"text-lg text-gray-600 mb-4\">\n          Find CNG stations across India with real-time status updates\n        </p>\n        <div className=\"flex flex-wrap justify-center gap-2 mb-4\">\n          {majorCities.map(city => (\n            <button\n              key={city}\n              onClick={() => setCityFilter(cityFilter === city ? '' : city)}\n              className={`px-3 py-1 rounded-full text-sm font-medium transition-colors ${\n                cityFilter === city \n                  ? 'bg-blue-600 text-white' \n                  : 'bg-gray-200 text-gray-700 hover:bg-gray-300'\n              }`}\n            >\n              {city}\n            </button>\n          ))}\n        </div>\n      </header>\n\n      {/* Location and Filters */}\n      <section className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n        <div className=\"grid md:grid-cols-2 gap-6\">\n          {/* Location Detection */}\n          <div>\n            <h2 className=\"text-xl font-semibold mb-4\">Your Location</h2>\n            <div className=\"space-y-4\">\n              <div className=\"flex gap-3\">\n                <button \n                  onClick={detectLocation}\n                  disabled={isLocationLoading}\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n                >\n                  {isLocationLoading ? 'Detecting...' : 'Detect My Location'}\n                </button>\n                {coords && (\n                  <button \n                    onClick={clearLocation}\n                    className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 font-medium\"\n                  >\n                    Clear Location\n                  </button>\n                )}\n              </div>\n              \n              {coords && (\n                <div className=\"p-3 bg-green-50 border border-green-200 rounded-lg\">\n                  <p className=\"text-green-800 font-medium\">Location detected!</p>\n                  <p className=\"text-green-600 text-sm\">\n                    Lat: {coords.lat.toFixed(4)}, Lng: {coords.lng.toFixed(4)}\n                  </p>\n                </div>\n              )}\n              \n              {geoError && (\n                <div className=\"p-3 bg-red-50 border border-red-200 rounded-lg\">\n                  <p className=\"text-red-800\">{geoError}</p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Search Filters */}\n          <div>\n            <h2 className=\"text-xl font-semibold mb-4\">Search Filters</h2>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Search by City\n                </label>\n                <input\n                  type=\"text\"\n                  value={cityFilter}\n                  onChange={(e) => setCityFilter(e.target.value)}\n                  placeholder=\"Enter city name...\"\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n              \n              {coords && (\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Search Radius: {selectedRadius}km\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"1\"\n                    max=\"50\"\n                    value={selectedRadius}\n                    onChange={(e) => setSelectedRadius(parseInt(e.target.value))}\n                    className=\"w-full\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                    <span>1km</span>\n                    <span>50km</span>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Results */}\n      <section>\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-2xl font-semibold text-gray-900\">\n            CNG Stations {data?.total ? `(${data.total} found)` : ''}\n          </h2>\n          <button\n            onClick={() => mutate()}\n            className=\"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 font-medium\"\n          >\n            Refresh\n          </button>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\">\n            <p className=\"text-red-800\">Failed to load pump data. Please try again.</p>\n          </div>\n        )}\n\n        {!data && !error && (\n          <div className=\"text-center py-12\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">Loading CNG stations...</p>\n          </div>\n        )}\n\n        {data && data.pumps && data.pumps.length === 0 && (\n          <div className=\"text-center py-12 bg-white rounded-lg shadow-md\">\n            <p className=\"text-gray-600 text-lg\">No CNG stations found.</p>\n            <p className=\"text-gray-500 mt-2\">Try adjusting your search criteria or location.</p>\n          </div>\n        )}\n\n        {data && data.pumps && data.pumps.length > 0 && (\n          <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n            {data.pumps.map((pump: Pump) => (\n              <div key={pump.id} className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\">\n                <div className=\"flex justify-between items-start mb-3\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 leading-tight\">\n                    {pump.name}\n                  </h3>\n                  <span className={`px-2 py-1 rounded-full text-xs font-medium ${\n                    pump.status \n                      ? 'bg-green-100 text-green-800' \n                      : 'bg-red-100 text-red-800'\n                  }`}>\n                    {getStatusText(pump.status)}\n                  </span>\n                </div>\n                \n                <div className=\"space-y-2 text-sm text-gray-600\">\n                  <p><span className=\"font-medium\">City:</span> {pump.city}</p>\n                  <p><span className=\"font-medium\">Address:</span> {pump.address}</p>\n                  \n                  {pump.phone && (\n                    <p><span className=\"font-medium\">Phone:</span> \n                      <a href={`tel:${pump.phone}`} className=\"text-blue-600 hover:underline ml-1\">\n                        {pump.phone}\n                      </a>\n                    </p>\n                  )}\n                  \n                  {pump.timings && (\n                    <p><span className=\"font-medium\">Timings:</span> {pump.timings}</p>\n                  )}\n                  \n                  {pump.distance && (\n                    <p><span className=\"font-medium\">Distance:</span> {formatDistance(pump.distance)} away</p>\n                  )}\n                </div>\n                \n                <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                  <div className=\"flex justify-between items-center\">\n                    <p className=\"text-xs text-gray-500\">\n                      Updated: {new Date(pump.updatedAt).toLocaleString()}\n                    </p>\n                    <a\n                      href={`https://www.google.com/maps/dir/?api=1&destination=${pump.latitude},${pump.longitude}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"text-blue-600 hover:text-blue-800 text-sm font-medium\"\n                    >\n                      Get Directions\n                    </a>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </section>\n\n      {/* Footer */}\n      <footer className=\"mt-12 text-center text-gray-500 text-sm\">\n        <p>CNG Gas Pumps Near Me - Real-time data for CNG stations across India</p>\n        <p className=\"mt-1\">Data updates every 30 seconds</p>\n      </footer>\n    </main>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}